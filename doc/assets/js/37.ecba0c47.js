(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{351:function(a,s,t){"use strict";t.r(s);var r=t(14),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"系统更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统更新"}},[a._v("#")]),a._v(" 系统更新")]),a._v(" "),s("p",[a._v("更新方式通用,请根据发布说明查看所需要的更新内容。 如版本有特殊更新则会在发布说明里说明。")]),a._v(" "),s("h2",{attrs:{id:"_1-普通方式部署更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-普通方式部署更新"}},[a._v("#")]),a._v(" 1.普通方式部署更新")]),a._v(" "),s("h3",{attrs:{id:"更新前端程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新前端程序"}},[a._v("#")]),a._v(" 更新前端程序")]),a._v(" "),s("p",[a._v("将下载文件包里的前端程序文件，替换到原系统的前端程序文件即可。")]),a._v(" "),s("p",[a._v("更新前请先备份原有文件。")]),a._v(" "),s("h3",{attrs:{id:"更新后端程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新后端程序"}},[a._v("#")]),a._v(" 更新后端程序")]),a._v(" "),s("p",[a._v("1、先将后端程序停止。")]),a._v(" "),s("p",[a._v("2、备份原有后端程序，例如改为wuyu-cost.jar.bak。")]),a._v(" "),s("p",[a._v("3、将新后端程序复制到原有目录，并改名为wuyu-cost。")]),a._v(" "),s("p",[a._v("4、启动后端。")]),a._v(" "),s("h3",{attrs:{id:"更新数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新数据库"}},[a._v("#")]),a._v(" 更新数据库")]),a._v(" "),s("p",[a._v("1、备份原数据库 登录数据库后执行导出操作")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# mysql\nmysqldump -uroot -p  wuyu_cost > ./wuyu_cost.sql\n\n# mariadb\nmariadb-dump  -uroot -p  wuyu_cost > ./wuyu_cost.sql\n\n\n")])])]),s("p",[a._v("2、登录数据库并导入升级文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# mysql\nmysql -u root -p\n\n# 进去mysql命令模式后使用\nuse database wuyu_cost;\n\n\n# 看到提示 Database changed 后继续执行\n\nsource   /opt/updata.sql ;  #注意这里要写绝对路径。\n\n\n# mariadb\nmariadb  -u root -p\n# 进去mariadb命令模式后使用\n\nuse database wuyu_cost;\n\n# 看到提示 Database changed 后继续执行\n\nsource   /opt/updata.sql ; #注意这里要写绝对路径。\n\n")])])]),s("p",[a._v("完成更新。")]),a._v(" "),s("h2",{attrs:{id:"_2-docker-compose更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-compose更新"}},[a._v("#")]),a._v(" 2.docker compose更新")]),a._v(" "),s("p",[a._v("1、前端程序更新\n将前端文件复制到compose/conf/www 目录下即可。")]),a._v(" "),s("p",[a._v("（注意备份）")]),a._v(" "),s("p",[a._v("2、后端程序更新\n将后端程序jar包复制到compose/conf/app 目录下即可。")]),a._v(" "),s("p",[a._v("然后将名称改为wuyu-cost.jar 并加上可执行权限")]),a._v(" "),s("p",[a._v("3、数据库文件更新\n更新同普通方式，需要注意的是连接数据为容器中的ip\n在登录命令时,需要加入-h参数,否则可能无法连接到容器里数据库 例如:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mysqldump -uroot -p -h127.0.0.1 wuyu_cost > ./wuyu_cost.sql\n\n")])])]),s("p",[a._v("备注：将127.0.0.1改为mysql容器的ip\n其他操作与普通方式部署更新里的数据库更新一致.")])])}),[],!1,null,null,null);s.default=e.exports}}]);